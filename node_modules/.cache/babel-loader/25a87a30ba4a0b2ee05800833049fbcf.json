{"ast":null,"code":"import _defineProperty from \"/Users/limengyang/Workspaces/eShop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/limengyang/Workspaces/eShop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/limengyang/Workspaces/eShop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/limengyang/Workspaces/eShop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/limengyang/Workspaces/eShop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/limengyang/Workspaces/eShop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/limengyang/Workspaces/eShop/src/components/common/RequiredField.js\";\nimport React from \"react\";\nimport * as PropTypes from \"prop-types\";\nimport assert from \"assert\";\nimport { emptyFunction } from \"../../utils/utils\";\n\nvar RequiredField =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(RequiredField, _React$PureComponent);\n\n  function RequiredField() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, RequiredField);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(RequiredField)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      error: false\n    };\n\n    _this.validate = function () {\n      var _this$props = _this.props,\n          _value = _this$props.value,\n          initValue = _this$props.initValue;\n      var value = React.Children.toArray(_this.props.children)[0].props.value;\n      var error = (_value !== undefined ? _value : value) === initValue;\n\n      _this.setState({\n        error: error\n      });\n\n      return error;\n    };\n\n    _this.handleChange = function (e) {\n      var bindingChange = _this.props.bindingChange;\n      var _React$Children$toArr = React.Children.toArray(_this.props.children)[0].props[bindingChange],\n          onChange = _React$Children$toArr === void 0 ? emptyFunction : _React$Children$toArr;\n      onChange(e, _this.validate);\n    };\n\n    return _this;\n  }\n\n  _createClass(RequiredField, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          children = _this$props2.children,\n          bindingChange = _this$props2.bindingChange;\n      var error = this.state.error;\n\n      var _children = React.Children.toArray(children);\n\n      assert.strictEqual(_children.length, 1, \"Expected exactly one child, but got \".concat(_children.length));\n      var helperText = _children[0].props.helperText;\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39\n        },\n        __self: this\n      }, React.Children.map(children, function (element) {\n        var _React$cloneElement;\n\n        return React.cloneElement(element, (_React$cloneElement = {\n          required: true,\n          error: error,\n          helperText: error ? \"This field is required\" : helperText\n        }, _defineProperty(_React$cloneElement, bindingChange, _this2.handleChange), _defineProperty(_React$cloneElement, \"onBlur\", _this2.validate), _React$cloneElement));\n      }));\n    }\n  }]);\n\n  return RequiredField;\n}(React.PureComponent);\n\nRequiredField.defaultProps = {\n  bindingChange: \"onChange\"\n};\nRequiredField.propTypes = {\n  value: PropTypes.any,\n  initValue: PropTypes.any.isRequired,\n  children: PropTypes.node.isRequired,\n  bindingChange: PropTypes.string\n};\nexport default RequiredField;","map":{"version":3,"sources":["/Users/limengyang/Workspaces/eShop/src/components/common/RequiredField.js"],"names":["React","PropTypes","assert","emptyFunction","RequiredField","state","error","validate","props","_value","value","initValue","Children","toArray","children","undefined","setState","handleChange","e","bindingChange","onChange","_children","strictEqual","length","helperText","map","element","cloneElement","required","PureComponent","defaultProps","propTypes","any","isRequired","node","string"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,SAAZ,MAA2B,YAA3B;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAAQC,aAAR,QAA4B,mBAA5B;;IAEMC,a;;;;;;;;;;;;;;;;;UAEFC,K,GAAQ;AACJC,MAAAA,KAAK,EAAE;AADH,K;;UAIRC,Q,GAAW,YAAM;AAAA,wBACsB,MAAKC,KAD3B;AAAA,UACCC,MADD,eACNC,KADM;AAAA,UACSC,SADT,eACSA,SADT;AAAA,UAEND,KAFM,GAEGV,KAAK,CAACY,QAAN,CAAeC,OAAf,CAAuB,MAAKL,KAAL,CAAWM,QAAlC,EAA4C,CAA5C,EAA+CN,KAFlD,CAENE,KAFM;AAGb,UAAMJ,KAAK,GAAG,CAACG,MAAM,KAAKM,SAAX,GAAuBN,MAAvB,GAAgCC,KAAjC,MAA4CC,SAA1D;;AAEA,YAAKK,QAAL,CAAc;AAACV,QAAAA,KAAK,EAAEA;AAAR,OAAd;;AAEA,aAAOA,KAAP;AACH,K;;UAEDW,Y,GAAe,UAAAC,CAAC,EAAI;AAAA,UACTC,aADS,GACQ,MAAKX,KADb,CACTW,aADS;AAAA,kCAEoCnB,KAAK,CAACY,QAAN,CAAeC,OAAf,CAAuB,MAAKL,KAAL,CAAWM,QAAlC,EAA4C,CAA5C,EAA+CN,KAFnF,CAERW,aAFQ;AAAA,UAEQC,QAFR,sCAEmBjB,aAFnB;AAGhBiB,MAAAA,QAAQ,CAACF,CAAD,EAAI,MAAKX,QAAT,CAAR;AACH,K;;;;;;;6BAEQ;AAAA;;AAAA,yBAC6B,KAAKC,KADlC;AAAA,UACEM,QADF,gBACEA,QADF;AAAA,UACYK,aADZ,gBACYA,aADZ;AAAA,UAEEb,KAFF,GAEW,KAAKD,KAFhB,CAEEC,KAFF;;AAIL,UAAMe,SAAS,GAAGrB,KAAK,CAACY,QAAN,CAAeC,OAAf,CAAuBC,QAAvB,CAAlB;;AAEAZ,MAAAA,MAAM,CAACoB,WAAP,CAAmBD,SAAS,CAACE,MAA7B,EAAqC,CAArC,gDAA+EF,SAAS,CAACE,MAAzF;AANK,UAQEC,UARF,GAQgBH,SAAS,CAAC,CAAD,CAAT,CAAab,KAR7B,CAQEgB,UARF;AAUL,aACI,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEQxB,KAAK,CAACY,QAAN,CAAea,GAAf,CAAmBX,QAAnB,EAA6B,UAAAY,OAAO;AAAA;;AAAA,eAChC1B,KAAK,CAAC2B,YAAN,CAAmBD,OAAnB;AAEQE,UAAAA,QAAQ,EAAE,IAFlB;AAGQtB,UAAAA,KAAK,EAAEA,KAHf;AAIQkB,UAAAA,UAAU,EAAElB,KAAK,GAAG,wBAAH,GAA8BkB;AAJvD,gDAKSL,aALT,EAKyB,MAAI,CAACF,YAL9B,kDAMgB,MAAI,CAACV,QANrB,wBADgC;AAAA,OAApC,CAFR,CADJ;AAgBH;;;;EAhDuBP,KAAK,CAAC6B,a;;AAmDlCzB,aAAa,CAAC0B,YAAd,GAA6B;AACzBX,EAAAA,aAAa,EAAE;AADU,CAA7B;AAIAf,aAAa,CAAC2B,SAAd,GAA0B;AACtBrB,EAAAA,KAAK,EAAET,SAAS,CAAC+B,GADK;AAEtBrB,EAAAA,SAAS,EAAEV,SAAS,CAAC+B,GAAV,CAAcC,UAFH;AAGtBnB,EAAAA,QAAQ,EAAEb,SAAS,CAACiC,IAAV,CAAeD,UAHH;AAItBd,EAAAA,aAAa,EAAElB,SAAS,CAACkC;AAJH,CAA1B;AAOA,eAAe/B,aAAf","sourcesContent":["import React from \"react\";\nimport * as PropTypes from \"prop-types\"\nimport assert from \"assert\";\nimport {emptyFunction} from \"../../utils/utils\";\n\nclass RequiredField extends React.PureComponent {\n\n    state = {\n        error: false\n    };\n\n    validate = () => {\n        const {value: _value, initValue} = this.props;\n        const {value} = React.Children.toArray(this.props.children)[0].props;\n        const error = (_value !== undefined ? _value : value) === initValue;\n\n        this.setState({error: error});\n\n        return error;\n    };\n\n    handleChange = e => {\n        const {bindingChange} = this.props;\n        const {[bindingChange]: onChange = emptyFunction} = React.Children.toArray(this.props.children)[0].props;\n        onChange(e, this.validate);\n    };\n\n    render() {\n        const {children, bindingChange} = this.props;\n        const {error} = this.state;\n\n        const _children = React.Children.toArray(children);\n\n        assert.strictEqual(_children.length, 1, `Expected exactly one child, but got ${_children.length}`);\n\n        const {helperText} = _children[0].props;\n\n        return (\n            <React.Fragment>\n                {\n                    React.Children.map(children, element =>\n                        React.cloneElement(element,\n                            {\n                                required: true,\n                                error: error,\n                                helperText: error ? \"This field is required\" : helperText,\n                                [bindingChange]: this.handleChange,\n                                onBlur: this.validate,\n                            })\n                    )\n                }\n            </React.Fragment>\n        );\n    }\n}\n\nRequiredField.defaultProps = {\n    bindingChange: \"onChange\",\n};\n\nRequiredField.propTypes = {\n    value: PropTypes.any,\n    initValue: PropTypes.any.isRequired,\n    children: PropTypes.node.isRequired,\n    bindingChange: PropTypes.string,\n};\n\nexport default RequiredField;\n"]},"metadata":{},"sourceType":"module"}